<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
          href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
          crossorigin="anonymous"/>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous">
    </script>

    <!-- Load jQuery UI last -->
    <link href = "https://code.jquery.com/ui/1.12.1/themes/ui-lightness/jquery-ui.css" rel = "stylesheet"/>
    <script src = "https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script>
        $(function() {
            $("tbody.sortable" ).sortable({
                update: function () {

                    save_new_order()


                }
            });
            $("tbody.sortable").disableSelection();

            function save_new_order() {

                var arr = [];
                $("tbody.sortable").children().each(function (i) {
                    arr.push($(this).attr('id'));
                });
                var s = arr.join(',');
                $.ajax({
                    type: 'GET',
                    url: '/sort/?data=' + s
                });
            };
        });
    </script>

    <title>Total Todos</title>

</head>

<body style="padding-top:100px;">

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="/">Total Todos</a>
        </div>
    </div>
</div>
<div class="container">
    <h1>Total Todos</h1>


    <table class="table table-hover" id="todos">
        <thead>
        <tr>
            <th>Text</th>
            <th>Start</th>
            <th>End</th>
            <th>Done?</th>
            <th></th>
            <th>Delete</th>
        </tr>
        <tr>
            <td><input type="text" id="textInput"/></td>
            <td><input type="date" id="startInput" onClick="updateEnd()"/></td>
            <td><input type="date" id="endInput"/></td>
            <td><input type="submit" value="Lagre" onclick="send()"/></td>
            <td></td>
        </tr>
        </thead>
        <tbody class="sortable">
        <tr th:id="${i.index}" class="items" th:each="item,i : *{todoList}">
            <td th:text="${item.text}">Item_name</td>
            <td th:text="${item.start}">Item_name</td>
            <td th:text="${item.end}">Item_name</td>
            <td>
                <img th:if="${item.done} == true"
                     src="checked-checkbox-xxl.png"
                     height="16" width="16"/>
            </td>
            <td><a th:href="@{/todo/(id=${i.index})}"></a></td>
            <td><a th:href="@{/delete/(id=${i.index})}">Delete</a></td>
        </tr>
        </tbody>
    </table>
    <p><a href="/">Refresh list</a></p>

</div>
<script type="application/javascript" th:src="@{/todo_scripts.js}"/>
</body>

</html>
