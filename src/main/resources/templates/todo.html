<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
          href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
          crossorigin="anonymous"/>

    <!-- Optional theme -->
    <link rel="stylesheet"
          href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
          crossorigin="anonymous"/>
    <title>Todo Item</title>
</head>

<body style="padding-top:100px;">

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">Total Todo</a>
        </div>
    </div>
</div>

<div class="container">

    <h1 th:text="${todo.text}">Text</h1>

    <form id="editTodo" action="/">
        <input type="text" id="textInput" th:value="${todo.text}"/>
        <input type="date" id="startInput" th:value="${todo.start}"/>
        <input type="date" id="endInput" th:value="${todo.end}"/>
        <input type="checkbox" id="isDone" th:value="${todo.done}"/>
        <input type="submit" value="Oppdater" th:onclick="@{ update({id}) (id=${param.id}) }"/>
        <input type="submit" value="Slett" th:onclick="@{ /delete/?id={id} (id=${param.id}) }"/>
    </form>
</div>
<!-- Load jQuery before Bootstrap -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>

<!-- Latest compiled and minified JavaScript -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>

<script>
    /*<![CDATA[*/

    function del(x) {

        var url = "/delete/?id=" + x;
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function () {
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                console.log();
            }
        }
        xmlHttp.open("GET", url, true);
        //xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        console.log("URL: " + url);
    }


    function update(x) {

        var url = "/update/?id=" + x;
        var text = document.getElementById("textInput").value;
        var start = document.getElementById("startInput").value;
        var end = document.getElementById("endInput").value;
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function () {
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                console.log();
            }
        }
        xmlHttp.open("PUT", url, true);
        xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlHttp.send("text=" + text + "&start=" + start + "&end=" + end);
        console.log("URL: " + url);
    }

    /*]]>*/
</script>

</body>
</html>